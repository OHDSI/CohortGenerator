<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Sample Cohort Definition Set — sampleCohortDefinitionSet • CohortGenerator</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Sample Cohort Definition Set — sampleCohortDefinitionSet"><meta name="description" content="Create 1 or more sample of size n of a cohort definition set
Subsetted cohorts can be sampled, as with any other subset form.
However, subsetting a sampled cohort is not recommended and not currently supported at this time.
In the case where n &amp;gt; cohort count the entire cohort is copied unmodified
As different databases have different forms of randomness, the random selection is computed in
R, based on the count for each cohort. This is, therefore, db platform independent
Note, this function assumes cohorts have already been generated.
Lifecycle Note: This functionality is considered experimental and not intended for use inside analytic packages"><meta property="og:description" content="Create 1 or more sample of size n of a cohort definition set
Subsetted cohorts can be sampled, as with any other subset form.
However, subsetting a sampled cohort is not recommended and not currently supported at this time.
In the case where n &amp;gt; cohort count the entire cohort is copied unmodified
As different databases have different forms of randomness, the random selection is computed in
R, based on the count for each cohort. This is, therefore, db platform independent
Note, this function assumes cohorts have already been generated.
Lifecycle Note: This functionality is considered experimental and not intended for use inside analytic packages"><link rel="stylesheet" type="text/css" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CohortGenerator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.12.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/CreatingCohortSubsetDefinitions.html">Creating Cohort Subset Definitions</a></li>
    <li><a class="dropdown-item" href="../articles/GeneratingCohorts.html">Generating Cohorts</a></li>
    <li><a class="dropdown-item" href="../articles/SamplingCohorts.html">Sampling Cohorts</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://ohdsi.github.io/Hades" aria-label="hadesLogo">hadesLogo</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/OHDSI/CohortGenerator/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Sample Cohort Definition Set</h1>
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/CohortGenerator/blob/v0.12.2/R/CohortSample.R" class="external-link"><code>R/CohortSample.R</code></a></small>
      <div class="d-none name"><code>sampleCohortDefinitionSet.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create 1 or more sample of size n of a cohort definition set</p>
<p>Subsetted cohorts can be sampled, as with any other subset form.
However, subsetting a sampled cohort is not recommended and not currently supported at this time.
In the case where n &gt; cohort count the entire cohort is copied unmodified</p>
<p>As different databases have different forms of randomness, the random selection is computed in
R, based on the count for each cohort. This is, therefore, db platform independent</p>
<p>Note, this function assumes cohorts have already been generated.</p>
<p>Lifecycle Note: This functionality is considered experimental and not intended for use inside analytic packages</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sampleCohortDefinitionSet</span><span class="op">(</span></span>
<span>  <span class="va">cohortDefinitionSet</span>,</span>
<span>  cohortIds <span class="op">=</span> <span class="va">cohortDefinitionSet</span><span class="op">$</span><span class="va">cohortId</span>,</span>
<span>  connectionDetails <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  connection <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tempEmulationSchema <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"sqlRenderTempEmulationSchema"</span><span class="op">)</span>,</span>
<span>  <span class="va">cohortDatabaseSchema</span>,</span>
<span>  outputDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  cohortTableNames <span class="op">=</span> <span class="fu"><a href="getCohortTableNames.html">getCohortTableNames</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sampleFraction <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">64374</span>,</span>
<span>  seedArgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  identifierExpression <span class="op">=</span> <span class="st">"cohortId * 1000 + seed"</span>,</span>
<span>  incremental <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  incrementalFolder <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cohortdefinitionset">cohortDefinitionSet<a class="anchor" aria-label="anchor" href="#arg-cohortdefinitionset"></a></dt>
<dd><p>The <code>cohortDefinitionSet</code> argument must be a data frame with
the following columns:</p><dl><dt>cohortId</dt>
<dd><p>The unique integer identifier of the cohort</p></dd>

<dt>cohortName</dt>
<dd><p>The cohort's name</p></dd>

<dt>sql</dt>
<dd><p>The OHDSI-SQL used to generate the cohort</p></dd>

</dl><p>Optionally, this data frame may contain:</p><dl><dt>json</dt>
<dd><p>The Circe JSON representation of the cohort</p></dd>

</dl></dd>


<dt id="arg-cohortids">cohortIds<a class="anchor" aria-label="anchor" href="#arg-cohortids"></a></dt>
<dd><p>Optional subset of cohortIds to generate. By default this function will sample all cohorts</p></dd>


<dt id="arg-connectiondetails">connectionDetails<a class="anchor" aria-label="anchor" href="#arg-connectiondetails"></a></dt>
<dd><p>An object of type <code>connectionDetails</code> as created using the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">createConnectionDetails</a></code> function in the
DatabaseConnector package. Can be left NULL if <code>connection</code> is
provided.</p></dd>


<dt id="arg-connection">connection<a class="anchor" aria-label="anchor" href="#arg-connection"></a></dt>
<dd><p>An object of type <code>connection</code> as created using the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/connect.html" class="external-link">connect</a></code> function in the
DatabaseConnector package. Can be left NULL if <code>connectionDetails</code>
is provided, in which case a new connection will be opened at the start
of the function, and closed when the function finishes.</p></dd>


<dt id="arg-tempemulationschema">tempEmulationSchema<a class="anchor" aria-label="anchor" href="#arg-tempemulationschema"></a></dt>
<dd><p>Some database platforms like Oracle and Impala do not truly support
temp tables. To emulate temp tables, provide a schema with write
privileges where temp tables can be created.</p></dd>


<dt id="arg-cohortdatabaseschema">cohortDatabaseSchema<a class="anchor" aria-label="anchor" href="#arg-cohortdatabaseschema"></a></dt>
<dd><p>Schema name where your cohort tables reside. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p></dd>


<dt id="arg-outputdatabaseschema">outputDatabaseSchema<a class="anchor" aria-label="anchor" href="#arg-outputdatabaseschema"></a></dt>
<dd><p>optional schema to output cohorts to (if different from cohortDatabaseSchema)</p></dd>


<dt id="arg-cohorttablenames">cohortTableNames<a class="anchor" aria-label="anchor" href="#arg-cohorttablenames"></a></dt>
<dd><p>The names of the cohort tables. See <code><a href="getCohortTableNames.html">getCohortTableNames</a></code>
for more details.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Sample size. Ignored if sample fraction is set</p></dd>


<dt id="arg-samplefraction">sampleFraction<a class="anchor" aria-label="anchor" href="#arg-samplefraction"></a></dt>
<dd><p>Fraction of cohort to sample</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Vector of seeds to give to the R pseudorandom number generator</p></dd>


<dt id="arg-seedargs">seedArgs<a class="anchor" aria-label="anchor" href="#arg-seedargs"></a></dt>
<dd><p>optional arguments to pass to set.seed</p></dd>


<dt id="arg-identifierexpression">identifierExpression<a class="anchor" aria-label="anchor" href="#arg-identifierexpression"></a></dt>
<dd><p>Optional string R expression used to compute output cohort id. Can only use variables
cohortId and seed. Default is "cohortId * 1000 + seed", which is substituted and evaluated</p></dd>


<dt id="arg-incremental">incremental<a class="anchor" aria-label="anchor" href="#arg-incremental"></a></dt>
<dd><p>Create only cohorts that haven't been created before?</p></dd>


<dt id="arg-incrementalfolder">incrementalFolder<a class="anchor" aria-label="anchor" href="#arg-incrementalfolder"></a></dt>
<dd><p>If <code>incremental = TRUE</code>, specify a folder where records are
kept of which definition has been executed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>sampledCohortDefinitionSet - a data.frame like object that contains the resulting identifiers and modified names of cohorts</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anthony Sena, Jamie Gilbert, Gowtham Rao, Freddy Avila Cruz, Martijn Schuemie.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

