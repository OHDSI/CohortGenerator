<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Sample Cohort Definition Set — sampleCohortDefinitionSet • CohortGenerator</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Sample Cohort Definition Set — sampleCohortDefinitionSet"><meta property="og:description" content="Create 1 or more sample of size n of a cohort definition set
Subsetted cohorts can be sampled, as with any other subset form.
However, subsetting a sampled cohort is not recommended and not currently supported at this time.
In the case where n &amp;gt; cohort count the entire cohort is copied unmodified
As different databases have different forms of randomness, the random selection is computed in
R, based on the count for each cohort. This is, therefore, db platform independent
Note, this function assumes cohorts have already been generated.
Lifecycle Note: This functionality is considered experimental and not intended for use inside analytic packages"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CohortGenerator</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.11.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/CreatingCohortSubsetDefinitions.html">Creating Cohort Subset Definitions</a>
    </li>
    <li>
      <a href="../articles/GeneratingCohorts.html">Generating Cohorts</a>
    </li>
    <li>
      <a href="../articles/SamplingCohorts.html">Sampling Cohorts</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://ohdsi.github.io/Hades" class="external-link"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a>
</li>
<li>
  <a href="https://github.com/OHDSI/CohortGenerator/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sample Cohort Definition Set</h1>
    <small class="dont-index">Source: <a href="https://github.com/OHDSI/CohortGenerator/blob/HEAD/R/CohortSample.R" class="external-link"><code>R/CohortSample.R</code></a></small>
    <div class="hidden name"><code>sampleCohortDefinitionSet.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create 1 or more sample of size n of a cohort definition set</p>
<p>Subsetted cohorts can be sampled, as with any other subset form.
However, subsetting a sampled cohort is not recommended and not currently supported at this time.
In the case where n &gt; cohort count the entire cohort is copied unmodified</p>
<p>As different databases have different forms of randomness, the random selection is computed in
R, based on the count for each cohort. This is, therefore, db platform independent</p>
<p>Note, this function assumes cohorts have already been generated.</p>
<p>Lifecycle Note: This functionality is considered experimental and not intended for use inside analytic packages</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sampleCohortDefinitionSet</span><span class="op">(</span></span>
<span>  <span class="va">cohortDefinitionSet</span>,</span>
<span>  cohortIds <span class="op">=</span> <span class="va">cohortDefinitionSet</span><span class="op">$</span><span class="va">cohortId</span>,</span>
<span>  connectionDetails <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  connection <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tempEmulationSchema <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"sqlRenderTempEmulationSchema"</span><span class="op">)</span>,</span>
<span>  <span class="va">cohortDatabaseSchema</span>,</span>
<span>  outputDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  cohortTableNames <span class="op">=</span> <span class="fu"><a href="getCohortTableNames.html">getCohortTableNames</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sampleFraction <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">64374</span>,</span>
<span>  seedArgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  identifierExpression <span class="op">=</span> <span class="st">"cohortId * 1000 + seed"</span>,</span>
<span>  incremental <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  incrementalFolder <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>cohortDefinitionSet</dt>
<dd><p>The <code>cohortDefinitionSet</code> argument must be a data frame with 
the following columns:</p><dl><dt>cohortId</dt>
<dd><p>The unique integer identifier of the cohort</p></dd>
 
<dt>cohortName</dt>
<dd><p>The cohort's name</p></dd>

<dt>sql</dt>
<dd><p>The OHDSI-SQL used to generate the cohort</p></dd>

</dl><p>Optionally, this data frame may contain:</p><dl><dt>json</dt>
<dd><p>The Circe JSON representation of the cohort</p></dd>

</dl></dd>


<dt>cohortIds</dt>
<dd><p>Optional subset of cohortIds to generate. By default this function will sample all cohorts</p></dd>


<dt>connectionDetails</dt>
<dd><p>An object of type <code>connectionDetails</code> as created using the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">createConnectionDetails</a></code> function in the
DatabaseConnector package. Can be left NULL if <code>connection</code> is
provided.</p></dd>


<dt>connection</dt>
<dd><p>An object of type <code>connection</code> as created using the
<code><a href="https://ohdsi.github.io/DatabaseConnector/reference/connect.html" class="external-link">connect</a></code> function in the
DatabaseConnector package. Can be left NULL if <code>connectionDetails</code>
is provided, in which case a new connection will be opened at the start
of the function, and closed when the function finishes.</p></dd>


<dt>tempEmulationSchema</dt>
<dd><p>Some database platforms like Oracle and Impala do not truly support
temp tables. To emulate temp tables, provide a schema with write
privileges where temp tables can be created.</p></dd>


<dt>cohortDatabaseSchema</dt>
<dd><p>Schema name where your cohort tables reside. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p></dd>


<dt>outputDatabaseSchema</dt>
<dd><p>optional schema to output cohorts to (if different from cohortDatabaseSchema)</p></dd>


<dt>cohortTableNames</dt>
<dd><p>The names of the cohort tables. See <code><a href="getCohortTableNames.html">getCohortTableNames</a></code>
for more details.</p></dd>


<dt>n</dt>
<dd><p>Sample size. Ignored if sample fraction is set</p></dd>


<dt>sampleFraction</dt>
<dd><p>Fraction of cohort to sample</p></dd>


<dt>seed</dt>
<dd><p>Vector of seeds to give to the R pseudorandom number generator</p></dd>


<dt>seedArgs</dt>
<dd><p>optional arguments to pass to set.seed</p></dd>


<dt>identifierExpression</dt>
<dd><p>Optional string R expression used to compute output cohort id. Can only use variables
cohortId and seed. Default is "cohortId * 1000 + seed", which is substituted and evaluated</p></dd>


<dt>incremental</dt>
<dd><p>Create only cohorts that haven't been created before?</p></dd>


<dt>incrementalFolder</dt>
<dd><p>If <code>incremental = TRUE</code>, specify a folder where records are
kept of which definition has been executed.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>sampledCohortDefinitionSet - a data.frame like object that contains the resulting identifiers and modified names of cohorts</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Anthony Sena, Jamie Gilbert, Gowtham Rao, Martijn Schuemie.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

